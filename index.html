<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Yeni Kovan Ekle</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        body { background-color: #f8f9fa; display: flex; flex-direction: column; min-height: 100vh; }
        .container { flex: 1; }
        /* Ä°MZA STÄ°LÄ° */
        .footer-signature { text-align: center; padding: 20px; font-size: 0.85rem; color: #6c757d; border-top: 1px solid #dee2e6; margin-top: 40px; background: #fff; }
        .footer-signature a { text-decoration: none; }
    </style>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
</head>
<body class="bg-light">

<nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4 shadow">
    <div class="container">
        <a class="navbar-brand fw-bold" href="kovanlarim.html"><i class="fa-solid fa-layer-group me-2 text-warning"></i>Kovan Takip</a>
        <a href="kovanlarim.html" class="btn btn-outline-light btn-sm"><i class="fa-solid fa-arrow-left"></i> Geri</a>
    </div>
</nav>

<div class="container pb-5">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <h4 class="mb-4 text-primary"><i class="fa-solid fa-plus-circle"></i> Yeni Kovan KaydÄ±</h4>
            <form id="kovanForm">
                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="card shadow-sm h-100">
                            <div class="card-header bg-white fw-bold"><img src="5.png" width="24" class="me-2"> Kovan Bilgileri</div>
                            <div class="card-body">
                                <div class="mb-3"><label class="form-label fw-bold">Kovan No *</label><input type="text" name="no" class="form-control" required></div>
                                <div class="mb-3"><label class="form-label">Barkod No</label><input type="text" name="barkod" class="form-control"></div>
                                <div class="row">
                                    <div class="col-6 mb-3"><label class="form-label">Tip</label><select name="tip" class="form-select"><option>Langstroth</option><option>Dadant</option><option>Karakovan</option><option>DiÄŸer</option></select></div>
                                    <div class="col-6 mb-3"><label class="form-label">Irk</label><select name="irk" class="form-select"><option>Melez</option><option>Kafkas</option><option>Karniyol</option><option>Ä°talyan</option><option>Anadolu</option><option>Belfast</option></select></div>
                                </div>
                                <div class="mb-3"><label class="form-label">Ã‡erÃ§eve SayÄ±sÄ±</label><input type="number" name="cerceve" class="form-control" value="0"></div>
                                <div class="mb-3"><label class="form-label">KÃ¶ken</label><select name="koken" class="form-select"><option>Kendi Ãœretimim</option><option>SatÄ±n Alma</option><option>OÄŸul</option></select></div>
                                <div class="mb-3"><label class="form-label">HÄ±rÃ§Ä±nlÄ±k</label><select name="hircinlik" class="form-select"><option value="1">1 - Ã‡ok Sakin</option><option value="2">2 - Sakin</option><option value="3" selected>3 - Normal</option><option value="4">4 - HÄ±rÃ§Ä±n</option><option value="5">5 - Ã‡ok HÄ±rÃ§Ä±n</option></select></div>
                                <div class="d-flex gap-3">
                                    <div class="form-check"><input class="form-check-input" type="checkbox" id="taban" name="taban"><label class="form-check-label">Delikli Taban</label></div>
                                    <div class="form-check"><input class="form-check-input" type="checkbox" id="polen" name="polen"><label class="form-check-label">Polen TuzaklÄ±</label></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card shadow-sm h-100 border-warning">
                            <div class="card-header bg-warning bg-opacity-10 fw-bold text-warning-emphasis"><img src="1.png" width="24" class="me-2"> Ana ArÄ± Bilgileri</div>
                            <div class="card-body">
                                <div class="mb-3"><label class="form-label">DoÄŸum Tarihi</label><input type="date" name="ana_dogum" class="form-control"></div>
                                <div class="mb-3"><label class="form-label">IrkÄ±</label><select name="ana_irk" class="form-select"><option>Melez</option><option>Kafkas</option><option>Karniyol</option><option>Ä°talyan</option><option>Anadolu</option></select></div>
                                <div class="mb-3"><label class="form-label">TÃ¼rÃ¼</label><select name="ana_tur" class="form-select"><option>DamÄ±zlÄ±k (F0)</option><option>Ã‡iftleÅŸmiÅŸ (F1)</option><option>Ã‡iftleÅŸmemiÅŸ</option><option>Kendi ÃœrettiÄŸim</option></select></div>
                                <div class="mb-3"><label class="form-label">Rengi</label><select name="ana_renk" class="form-select"><option>BoyasÄ±z</option><option>Beyaz</option><option>SarÄ±</option><option>KÄ±rmÄ±zÄ±</option><option>YeÅŸil</option><option>Mavi</option></select></div>
                                <div class="mb-3"><label class="form-label">Performans</label><select name="ana_perf" class="form-select"><option>Ã‡ok Ä°yi</option><option selected>Ä°yi</option><option>Orta</option><option>ZayÄ±f</option></select></div>
                                <div class="mb-3"><label class="form-label">Planlanan DeÄŸiÅŸim</label><input type="date" name="ana_degisim" class="form-control"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12"><button type="submit" id="btnKaydet" class="btn btn-success w-100 py-3 fw-bold shadow"><i class="fa-solid fa-save me-2"></i>KovanÄ± Kaydet</button></div>
                </div>
            </form>
        </div>
    </div>
</div>

<footer class="footer-signature">
    <p class="mb-1">Â© 2025 Hakan Yabgu â€¢ ArÄ± severler iÃ§in geliÅŸtirildi ğŸ</p>
    <small class="d-block mb-3">Fikir ve Ã¶nerileriniz iÃ§in: <a href="mailto:yabguhakan2025@gmail.com">yabguhakan2025@gmail.com</a></small>
    
    <div class="mt-3">
        <small class="d-block text-secondary">UygulamayÄ± faydalÄ± bulduysanÄ±z, bir kahve Ä±smarlayarak destek olabilirsiniz.</small>
        <small class="d-block text-secondary mb-2">(Åimdiden teÅŸekkÃ¼rler!)</small>
        <a href="https://banabicoffee.com/@hakanyabgu" target="_blank" class="btn btn-warning btn-sm rounded-pill fw-bold text-dark shadow-sm">
            <i class="fa-solid fa-mug-hot me-1"></i> Kahve Ismarla
        </a>
    </div>
</footer>

<script>
    const firebaseConfig = { apiKey: "AIzaSyAO7203PN7V8IBxYe0B13iRy0Ahwzm5sXY", authDomain: "kovan-takip-4c054.firebaseapp.com", projectId: "kovan-takip-4c054", storageBucket: "kovan-takip-4c054.appspot.com", messagingSenderId: "783431210365", appId: "1:783431210365:web:5810ec74c9ff3ba8d4a814" };
    if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const auth = firebase.auth();
    let currentUser = null;

    auth.onAuthStateChanged(user => { if(user) currentUser = user; else window.location.href='login.html'; });

    document.getElementById('kovanForm').addEventListener('submit', function(e) {
        e.preventDefault();
        if(!currentUser) return;
        const btn = document.getElementById('btnKaydet'); btn.disabled = true; btn.innerHTML = 'Kaydediliyor...';
        const f = new FormData(this);
        const data = { sahip: currentUser.uid, no: f.get('no'), barkod: f.get('barkod'), tip: f.get('tip'), irk: f.get('irk'), cerceve: Number(f.get('cerceve')), koken: f.get('koken'), hircinlik: Number(f.get('hircinlik')), taban: document.getElementById('taban').checked, polen: document.getElementById('polen').checked, ana: { dogum: f.get('ana_dogum'), irk: f.get('ana_irk'), tur: f.get('ana_tur'), renk: f.get('ana_renk'), perf: f.get('ana_perf'), degisim: f.get('ana_degisim') }, guncelleme: new Date().toISOString().split('T')[0] };
        db.collection("kullanicilar").doc(currentUser.uid).collection("kovanlar").add(data).then(() => window.location.href = "kovanlarim.html").catch(err => { alert(err.message); btn.disabled = false; });
    });
</script>
</body>
</html>